<!DOCTYPE html>
<html lang="en">

<head>
 <meta charset="UTF-8">
  <title>Subsecretaria de transito y vialidad</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
      <link rel="shortcut icon" href="Icono/Icono.ico"/>
       <link rel="stylesheet" type="text/css" href="css/estilo.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
        <link rel='stylesheet' href='https://cdn.jsdelivr.net/foundation/5.5.0/css/foundation.css'>
        <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css'>
        <link rel="stylesheet" href="style.css">

</head>

<body>
  <img src="../Imagenes/Imagen.jpg" alt="Mi imagen">
  <div class="row">
    <div class="large-12 columns">
       <h1>Subsecretaria de transito y vialidad</h1>
        <h2>Carretera Tixtla SN, Alianza Popular, 39025 Chilpancingo de los Bravo, Gro.</h2>
        <h3>7474722062</h3> 
          <h4>Ingresar nueva multa</h4> 
        <table id="test-table">
          <thead>
            <tr>
              <th>Fecha</th>
              <th>Nombre del oficial</th>
              <th>Matricula del vehiculo</th>
              <th>Folio</th>
              <th>Ubicacion</th>
              <th>Nombre del infractor</th>
              <th>Total a pagar</th>
              <th>Motivo de la multa</th>
              <th>Tipo de vehiculo</th>
              <th></th>
            </tr>
          </thead>
          <tfoot></tfoot>
          <tbody>
            <tr>
              <td><label for=""><input type="text" name="Fecha" id="fecha" placeholder="Fecha" /></label></td>
              <td><label for=""><input type="text" name="Nombre del oficial" id="nombre_del_oficial" placeholder="Nombre del oficial" /></label></td>
              <td><label for=""><input type="text" name="Matricula del vehiculo" id="matricula_del_vehiculo" placeholder="Matricula del vehiculo" /></label></td>
              <td><label for=""><input type="text" name="Folio" id="folio" placeholder="Folio" /></label></td>
              <td><label for=""><input type="text" name="Ubicacion" id="ubicacion" placeholder="Ubicacion" /></label></td>
              <td><label for=""><input type="text" name="Nombre del infractor" id="nombre_del_infractor" placeholder="Nombre del infractor" /></label></td> 
              <td><label for=""><input type="text" name="Total a pagar" id="total_a_pagar" placeholder="Total a pagar" /></label></td> 
              <td><label for=""><input type="text" name="Motivo de la multa" id="motivo_de_la_multa" placeholder="Motivo de la multa" /></label></td>
              <td><label for=""><input type="text" name="Tipo de vehiculo" id="tipo_de_vehiculo" placeholder="Tipo de vehiculo" /></label></td>                    
              <td>
                <button class="tiny button" id="guarda_usuario">Guardar multa</button>        
                <script type="text/javascript" src="jspdf.min.js"></script>
                <script type="text/javascript">
            </script>
        </td>
    </tr>
          </tbody>
        </table>
      <div>
        <h4>Pago de multa</h4>
        <label for=""><input type="text" name="id" id="id" placeholder="ID" /></label>
       
        </button>
        
        <table id="test-table">
          <thead>
            <tr>
              <th>Fecha</th>
              <th>Nombre del oficial</th>
              <th>Matricula</th>
              <th>Folio</th>
              <th>Ubicacion</th>
              <th>Nombre del infractor</th>
              <th>Total a pagar</th>
              <th>Motivo de la multa</th>
              <th>Tipo de vehiculo</th>
              <th></th>
            </tr>
          </thead>
          <tfoot></tfoot>
          <tbody>
            <tr>
              <td><label for=""><input type="text" name="Fecha" id="fecha2" placeholder="Fecha" /></label></td>
              <td><label for=""><input type="text" name="Nombre del oficial" id="nombre_del_oficial2" placeholder="Nombre del oficial" /></label></td>
              <td><label for=""><input type="text" name="Matricula del vehiculo" id="matricula_del_vehiculo2" placeholder="Matricula" /></label></td>
              <td><label for=""><input type="text" name="Folio" id="folio2" placeholder="Folio" /></label></td>
              <td><label for=""><input type="text" name="Ubicacion" id="ubicacion2" placeholder="Ubicacion" /></label></td>
              <td><label for=""><input type="text" name="Nombre del infractor" id="nombre_del_infractor2" placeholder="Nombre del infractor" /></label></td>
              <td><label for=""><input type="text" name="Total a pagar" id="total_a_pagar2" placeholder="Total a pagar" /></label></td> 
              <td><label for=""><input type="text" name="Motivo de la multa" id="motivo_de_la_multa2" placeholder="Motivo de la multa" /></label></td>
              <td><label for=""><input type="text" name="Tipo de vehiculo" id="tipo_de_vehiculo2" placeholder="Tipo de vehiculo" /></label></td>                  
             
            <!-- ...tu código HTML... -->

<button class="btn" id="obtener_usuario">Obtener datos</button>

<!-- ...tu código HTML... -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.68/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.68/vfs_fonts.js"></script>

<script>
  // Manejar el evento click del botón "Obtener datos"
  document.getElementById('obtener_usuario').addEventListener('click', function() {
    var idUsuario = document.getElementById('id').value;
    obtenerUsuario(idUsuario); // Llama a la función para obtener los datos del usuario
  });

  function obtenerUsuario(id) {
    // Realizar la solicitud de búsqueda a tu API REST utilizando fetch o AJAX
    fetch('http://localhost:8080/user?id=' + id)
      .then(response => response.json())
      .then(data => {
        mostrarDatosUsuario(data); // Llama a la función para mostrar los datos del usuario
        generarPDF(data); // Llama a la función para generar el PDF con los datos del usuario
      })
      .catch(error => {
        console.error(error);
      });
  }

  function mostrarDatosUsuario(data) {
    // Mostrar los datos del usuario en los campos correspondientes del formulario
    document.getElementById('fecha2').value = data.fecha;
    document.getElementById('nombre_del_oficial2').value = data.nombre_del_oficial;
    document.getElementById('matricula_del_vehiculo2').value = data.matricula_del_vehiculo;
    document.getElementById('folio2').value = data.folio;
    document.getElementById('ubicacion2').value = data.ubicacion;
    document.getElementById('nombre_del_infractor2').value = data.nombre_del_infractor;
    document.getElementById('total_a_pagar2').value = data.total_a_pagar;
    document.getElementById('motivo_de_la_multa2').value = data.motivo_de_la_multa;
    document.getElementById('tipo_de_vehiculo2').value = data.tipo_de_vehiculo;
  }

  function generarPDF(data) {
    var docDefinition = {
      content: [
    { text: 'Subsecretaria de transito y vialidad', style: 'header' },
    { text: 'Carretera Tixtla SN, Alianza Popular, 39025 Chilpancingo de los Bravo, Gro.', style: 'title1' },
    { text: 'Información de la multa', style: 'title2' },
    { text: 'Fecha: ' + data.fecha, style: 'fecha' },
    { text: 'Folio: ' + data.folio, style: 'folio', color: 'red' },
    { text: 'Ubicación: ' + data.ubicacion, style: 'ubicacion' },
    { text: 'Nombre del oficial: ' + data.nombre_del_oficial, style: 'nombre_del_oficial' },
    { text: 'Nombre del infractor: ' + data.nombre_del_infractor, style: 'nombre_del_infractor' },
    { text: 'Matrícula del vehículo: ' + data.matricula_del_vehiculo, style: 'matricula_del_vehiculo' },
    { text: 'Tipo de vehículo: ' + data.tipo_de_vehiculo, style: 'tipo_de_vehiculo' },
    { text: 'Motivo de la multa: ' + data.motivo_de_la_multa, style: 'motivo_de_la_multa' },
    { text: 'Total a pagar: ' + data.total_a_pagar, style: 'total_a_pagar' },
    { text: 'NOTA: ESTA BOLETA PROTEGE AL INFRACTOR DURANTE EL TERMINO DE 10 DÍAS POR LA FALTA DE PLACA DE CIRCULACION O DOCUMENTO RETENIDO.', style: 'title3' },
    { text: 'Dentro de los primeros 8 dias al infractor se le otorgara 50% de descuento, del 5to.Al decimo día 25% de descuento y sin descuento despues del decimo dia Art.296. De acuerdo a los articulos que apliquen descuento dentro del reglamento.', style: 'title4' },
    // { text: 'En las actas relativas a infracciones a los reglamentos gubernativos se harán constar concretamente el hecho o hechos,omisión u omisiones que motivan la infracción. Dichas actas deberán ser turnadas a la oficina de que dependan quien levante la infracción, dentro de las veinticuatro horas siguientes, para que dicha oficina, dentro de igual plazo, la turne a la oficina Central Calificadora de Infracciones, para que esta imponga la sanción correspondiente, o dicte la resolución que procede', style: 'title5' },
    {
      canvas: [
        // { type: 'rect', x:-30, y: 200, w: 575, h: 500 }, // Ejemplo de rectángulo
        { type: 'line', x1:-30, y1: -510, x2: 545, y2: -510, lineWidth: 1, top: 10 }, // Ejemplo de línea roja
        { type: 'line', x1:-30, y1: -430, x2: 545, y2: -430, lineWidth: 1, top: 10 },
        { type: 'line', x1:-30, y1: -400, x2: 545, y2: -400, lineWidth: 1, top: 10 },
        { type: 'line', x1:300, y1: -400, x2: 300, y2: -430, lineWidth: 1, top: 10 },
        { type: 'line', x1:-30, y1: -360, x2: 545, y2: -360, lineWidth: 1, top: 10 },
        { type: 'line', x1:-30, y1: -320, x2: 545, y2: -320, lineWidth: 1, top: 10 },
        { type: 'line', x1:-30, y1: -280, x2: 545, y2: -280, lineWidth: 1, top: 10 },
        { type: 'line', x1:-30, y1: -240, x2: 545, y2: -240, lineWidth: 1, top: 10 },
        { type: 'line', x1:240, y1: -240, x2: 240, y2: -280, lineWidth: 1, top: 10 },
        { type: 'line', x1:-30, y1: -210, x2: 545, y2: -210, lineWidth: 1, top: 10 },
        { type: 'line', x1:240, y1: -240, x2: 240, y2: -280, lineWidth: 1, top: 10 },
        { type: 'line', x1:-30, y1: -100, x2: -30, y2: -510, lineWidth: 1, top: 10 },
        { type: 'line', x1:545, y1: -100, x2: 545, y2: -510, lineWidth: 1, top: 10 },
        { type: 'line', x1:-30, y1: -100, x2: 545, y2: -100, lineWidth: 1, top: 10 },
      ]
    }
  ],
  styles: {
    header: {
      fontSize: 20,
      bold: true,
      margin: [85, -10, 10, -20]
    },

  
    subheader: {
      fontSize: 16,
      bold: true,
      margin: [0, 40, 0, 40]
      
    },
    title3: {
      fontSize: 15,
      margin: [-35, 100, 0, 10] 
        },

    fecha: {
      fontSize: 15,
      margin:[-20, 10, 0, 10] 
        },
      nombre_del_oficial: {
      fontSize: 15,
      margin: [-20, 10, 0, 10]
        },
      matricula_del_vehiculo: {
      fontSize: 15,
      margin: [-20, 10, 0, 10] 
        },
      folio: {
      fontSize: 15,
      margin: [350, -25, 0, 10] 
        },
      ubicacion: {
      fontSize: 15,
      margin:[-20, 10, 0, 10] 
        },
      nombre_del_infractor: {
      fontSize: 15,
      margin: [-20, 10, 0, 10] 
        },
      total_a_pagar: {
      fontSize: 15,
      margin: [-20, 10, 0, 10]
        },
      motivo_de_la_multa: {
      fontSize: 15,
      margin: [-20, 10, 0, 10]
        },
      tipo_de_vehiculo: {
      fontSize: 15,
      margin: [250, -27, 0, 10]
        },
      title1: {
      fontSize: 13,
      margin: [40, 20, 10, 5]
        },
      title2: {
      fontSize: 13,
      margin: [160, 0, 10, 5] 
        },
      
      title4: {
      fontSize: 10,
      margin: [-35, 0, 0, 0] 
        },
      title5: {
      fontSize: 10,
      margin: [-35, 0, 0, 0] 
        },  
      }
    };

    pdfMake.createPdf(docDefinition).download('detalles_usuario.pdf');
  }
</script>

<!-- ...tu código HTML... -->

            
            </tbody>


        </table>
      </div>
    </div>
  </div>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.0/js/foundation.min.js'></script>
  <script src="script.js"></script>
  <script src="PDF.js"></script>
 
</body>

</html>